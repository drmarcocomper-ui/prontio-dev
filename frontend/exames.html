<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>PRONTIO - Exames</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ✅ Padronização: inclui CSS base + topbar/modais -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/components/modals.css">
  <link rel="stylesheet" href="assets/css/components/topbar.css">
</head>

<body
  data-theme="light"
  data-page-id="exames"
  data-subtitle="Solicitação de exames (SADT / particular)"
  data-tag="Exames"
  data-context="Exames"
  data-has-prontuario="true"
>
  <div class="app-shell">
    <!-- ✅ Sidebar compartilhada (partial) -->
    <div data-include-sidebar></div>

    <!-- ÁREA PRINCIPAL -->
    <main class="main-area">
      <!-- ✅ Topbar padronizada via widget -->
      <div id="topbarMount" data-partial="topbar"></div>

      <!-- CONTEÚDO -->
      <section class="content">
        <!-- MENSAGEM GLOBAL -->
        <div id="mensagemExames" class="mensagem" style="display:none;"></div>

        <!-- CARD: PACIENTE ATUAL -->
        <section class="card">
          <div class="card-header">
            <h2>Paciente atual</h2>
          </div>

          <div class="info-paciente-grid">
            <div>
              <span class="info-paciente-label">ID do paciente:</span><br>
              <span class="info-paciente-valor" id="exPacienteId">-</span>
            </div>
            <div>
              <span class="info-paciente-label">Nome completo:</span><br>
              <span class="info-paciente-valor" id="exPacienteNome">-</span>
            </div>
          </div>
        </section>

        <!-- CARD: ABAS SADT / PARTICULAR -->
        <section class="card">
          <div class="card-header">
            <h2>Solicitação de exames</h2>
          </div>

          <div class="aba-exames-tabs">
            <button type="button" id="tabSadt" class="aba-btn ativa">
              Plano de saúde (SADT)
            </button>
            <button type="button" id="tabParticular" class="aba-btn">
              Particular (lista de exames)
            </button>
          </div>

          <!-- ABA SADT -->
          <div id="abaSadt">
            <div class="form-grid-2">
              <div class="campo-form">
                <label for="sadtPlano">Convênio / Plano de saúde</label>
                <input type="text" id="sadtPlano" placeholder="Ex.: Unimed, Bradesco, Amil">
              </div>

              <div class="campo-form">
                <label for="sadtCarteira">Número da carteirinha</label>
                <input type="text" id="sadtCarteira">
              </div>

              <div class="campo-form">
                <label for="sadtNumeroGuia">Número da guia (se houver)</label>
                <input type="text" id="sadtNumeroGuia">
                <div class="campo-ajuda">
                  Use se seu convênio usar campo de número de guia SADT.
                </div>
              </div>

              <div class="campo-form">
                <label for="sadtCid">CID principal</label>
                <input type="text" id="sadtCid" placeholder="Ex.: M54.5">
              </div>
            </div>

            <div class="campo-form">
              <label for="sadtIndicaoClinica">Indicação clínica / Justificativa</label>
              <textarea id="sadtIndicaoClinica" placeholder="Justifique clinicamente os exames solicitados."></textarea>
            </div>

            <div class="campo-form">
              <label for="sadtExamesTexto">Exames solicitados (texto livre)</label>
              <textarea id="sadtExamesTexto" placeholder="Descreva aqui os exames no formato exigido pelo convênio."></textarea>
            </div>

            <div class="campo-form">
              <label for="sadtObservacoes">Observações adicionais</label>
              <textarea id="sadtObservacoes"></textarea>
            </div>

            <div class="acoes-form">
              <button type="button" id="btnGerarSadt" class="btn primario">
                Gerar guia SADT (PDF)
              </button>
            </div>
          </div>

          <!-- ABA PARTICULAR -->
          <div id="abaParticular" class="hidden">
            <div class="campo-form">
              <label>Exames disponíveis (catálogo)</label>
              <div class="campo-ajuda">
                Marque os exames que deseja solicitar para este paciente. Esta lista vem da aba
                <strong>Exames</strong> na planilha.
              </div>
            </div>

            <div class="filtro-exames">
              <input
                type="text"
                id="filtroExames"
                placeholder="Filtrar por nome ou grupo..."
              >
              <button type="button" id="btnRecarregarExames" class="btn secundario">
                Recarregar catálogo
              </button>
            </div>

            <div class="tabela-exames-wrapper">
              <table class="tabela-exames">
                <thead>
                  <tr>
                    <th class="col-exame-check">Sel.</th>
                    <th>Exame</th>
                    <th class="col-exame-grupo">Grupo</th>
                    <th>Descrição</th>
                  </tr>
                </thead>
                <tbody id="tabelaExamesBody"></tbody>
              </table>
            </div>

            <div class="campo-form" style="margin-top: 10px;">
              <label for="partExamesTextoLivre">Exames adicionais (texto livre)</label>
              <textarea id="partExamesTextoLivre" placeholder="Use este campo para exames que não estejam no catálogo."></textarea>
            </div>

            <div class="campo-form">
              <label for="partObservacoes">Observações / orientações ao paciente ou serviço</label>
              <textarea id="partObservacoes"></textarea>
            </div>

            <div class="acoes-form">
              <button type="button" id="btnGerarParticular" class="btn primario">
                Gerar pedido particular (PDF)
              </button>
            </div>
          </div>
        </section>
      </section>
    </main>
  </div>

  <script src="assets/js/main.js"></script>
</body>
</html>
