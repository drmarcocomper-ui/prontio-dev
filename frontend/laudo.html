<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>PRONTIO - Laudo</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/components/modals.css">
  <link rel="stylesheet" href="assets/css/components/topbar.css">
</head>

<body
  data-page-id="laudo"
  data-subtitle="Emissão e histórico de laudos médicos"
  data-tag="Laudos"
  data-context="Laudos"
  data-has-prontuario="true"
>
  <div class="app-shell">
    <!-- ✅ Sidebar compartilhada (partial) -->
    <div data-include-sidebar></div>

    <!-- ÁREA PRINCIPAL -->
    <main class="main-area">
      <!-- ✅ Topbar padronizada -->
      <div id="topbarMount" data-partial="topbar"></div>

      <!-- CONTEÚDO -->
      <section class="content">
        <!-- MENSAGEM GLOBAL -->
        <div id="mensagemLaudo" class="mensagem" style="display:none;"></div>

        <!-- CARD: PACIENTE -->
        <section class="card">
          <div class="card-header">
            <h2>Paciente atual</h2>
          </div>

          <div class="info-paciente-grid">
            <div>
              <span class="info-paciente-label">ID do paciente:</span><br>
              <span class="info-paciente-valor" id="laudoPacienteId">-</span>
            </div>
            <div>
              <span class="info-paciente-label">Nome completo:</span><br>
              <span class="info-paciente-valor" id="laudoPacienteNome">-</span>
            </div>
          </div>
        </section>

        <!-- CARD: NOVO LAUDO -->
        <section class="card">
          <div class="card-header">
            <h2>Novo laudo</h2>
          </div>

          <form id="formLaudo" novalidate>
            <div class="form-laudo-grid">
              <div class="campo-form">
                <label for="laudoTitulo">Título do laudo *</label>
                <input
                  type="text"
                  id="laudoTitulo"
                  required
                  placeholder="Ex.: Laudo clínico geral, Laudo de exame de imagem..."
                >
                <div class="campo-ajuda">
                  Este título aparecerá no cabeçalho do laudo impresso.
                </div>
              </div>

              <div class="campo-form">
                <label for="laudoTipo">Tipo de laudo</label>
                <select id="laudoTipo">
                  <option value="">(não especificado)</option>
                  <option value="Clínico">Clínico</option>
                  <option value="Exame de imagem">Exame de imagem</option>
                  <option value="Exame laboratorial">Exame laboratorial</option>
                  <option value="Atestado detalhado">Atestado detalhado</option>
                  <option value="Outro">Outro</option>
                </select>
              </div>
            </div>

            <div class="campo-form">
              <label for="laudoTexto">Texto do laudo *</label>
              <textarea
                id="laudoTexto"
                required
                placeholder="Descreva aqui o laudo, achados, conclusões, etc."
              ></textarea>
            </div>

            <div class="campo-form">
              <label for="laudoObservacoes">Observações adicionais</label>
              <textarea
                id="laudoObservacoes"
                placeholder="Informações complementares, recomendações, etc."
              ></textarea>
            </div>

            <div class="acoes-form-laudo">
              <button type="submit" class="btn primario">Salvar laudo</button>
              <button type="button" id="btnLimparLaudo" class="btn secundario">
                Limpar campos
              </button>
            </div>
          </form>
        </section>

        <!-- CARD: HISTÓRICO DE LAUDOS -->
        <section class="card">
          <div class="card-header card-header-lista">
            <h2>Laudos anteriores do paciente</h2>
            <span style="font-size: 12px; color: #666;">
              Use os botões PDF para imprimir e "Usar como modelo" para reaproveitar textos.
            </span>
          </div>

          <div class="tabela-laudos-wrapper">
            <table class="tabela-laudos">
              <thead>
                <tr>
                  <th class="col-laudo-data">Data / Hora</th>
                  <th>Título</th>
                  <th class="col-laudo-tipo">Tipo</th>
                  <th>Observações</th>
                  <th class="col-laudo-acoes">Ações</th>
                </tr>
              </thead>
              <tbody id="tabelaLaudosBody">
                <!-- linhas via JS -->
              </tbody>
            </table>
          </div>
        </section>
      </section>
    </main>
  </div>

  <!-- MODAL: SOBRE -->
  <div id="modalSobreSistema" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalSobreSistemaTitulo">
    <div class="modal modal--lg">
      <div class="modal-header">
        <h2 class="modal-title" id="modalSobreSistemaTitulo">PRONTIO — Sobre o Sistema</h2>
        <div class="modal-header-actions">
          <button type="button" class="modal-close" aria-label="Fechar" data-modal-close="modalSobreSistema">✕</button>
        </div>
      </div>
      <div class="modal-body">
        <p><strong>PRONTIO — Sistema de Consultório Médico</strong><br>
        Desenvolvido para uso pessoal do <strong>Dr. Marco Antônio Comper</strong>.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-modal-close="modalSobreSistema">Fechar</button>
      </div>
    </div>
  </div>

  <script src="assets/js/main.js"></script>
</body>
</html>
